package ch.hearc.p2.test;

import org.lwjgl.input.Controller;
import org.lwjgl.input.Controllers;

public class test {
    public static void main(String[] argv) {
	try {
		Controllers.create();
	} catch (Exception e) {
		e.printStackTrace();
		System.exit(0);
	}

	int count = Controllers.getControllerCount();
	System.out.println(count+" Controllers Found");
	for (int i=0;i<count;i++) {
		Controller controller = Controllers.getController(i);
		System.out.println(controller.getName());
	}

	if (count == 0) {
		System.exit(0);
	}

	TestControllers[] controllerWindows = new TestControllers[count];
	for (int i=0;i<count;i++) {
		controllerWindows[i] = new TestControllers(i);
	}

	boolean running = true;
	while (running) {
		try { Thread.sleep(100); } catch (Exception e) {};

		Controllers.poll();

		while (Controllers.next()) {
			System.out.println("Event Fired: ");
			System.out.println("\t"+Controllers.getEventNanoseconds());
			System.out.println("\t"+Controllers.getEventSource()+":"+Controllers.getEventControlIndex()+":"+Controllers.isEventButton());
			System.out.println("\t"+Controllers.isEventXAxis()+":"+Controllers.isEventYAxis());
		}

		for (int i=0;i<count;i++) {
			controllerWindows[i].updateDetails();
		}
	}
}
 

}
